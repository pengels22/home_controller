<!-- RS485 Module Settings Popup (copied from I2C config, expanded to 40 channels) -->
<div class="module-settings-popup">
  <h2>RS485 Module Settings</h2>
  <form>
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:10px">
      <label style="min-width:110px">Module Name:</label>
      <input type="text" name="module_name" style="flex:1;min-width:180px" />
    </div>
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:18px">
      <label style="min-width:110px">RS485 Address:</label>
      <span id="address_value">1</span>
    </div>
    <div class="channels">
      <h3>Channels</h3>
      <div style="display:flex;flex-wrap:wrap;gap:18px">
        {% for col in range(0,5) %}
        <div>
          <h4>Channels {{ col*8+1 }}-{{ col*8+8 }}</h4>
          <div style="display:flex;flex-direction:column;gap:4px">
            {% for i in range(col*8+1, col*8+9) %}
            <div style="display:flex;align-items:center;gap:8px">
              <input type="text" name="ch{{i}}" placeholder="CH{{i}}" style="width:110px" />
              <select name="type{{i}}" style="width:150px">
                {% for sensor in i2c_sensors %}
                  <option value="{{ sensor.name }}">{{ sensor.name }} ({{ sensor.type }})</option>
                {% endfor %}
              </select>
              <label style="font-size:12px;color:#555;">Addr <input type="text" name="addr{{i}}" style="width:60px" /></label>
            </div>
            {% endfor %}
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    <div class="form-actions">
      <!-- Save button is added by JS -->
      <button type="button" onclick="closePopup()">Cancel</button>
      <div style="font-size:12px;color:#888;margin-top:8px;">Use the Save button below to persist changes.</div>
    </div>
  </form>
</div>
