{% extends "base.html" %}
{% block content %}
<h1>I2C Module Settings</h1>

<div class="card">
  <form method="post">
    <div style="margin-bottom:10px;">
      <label>I2C Module Name</label><br/>
      <input name="i2c_name" value="{{ i2c.name }}" />
    </div>
    <div style="margin-bottom:10px;">
      <label>I2C Module I2C Address</label><br/>
      <input name="i2c_address" value="{{ i2c.address_hex }}" />
    </div>
    <hr/>
    <h3>Channels</h3>
    {% for ch in i2c.channels %}
    <div style="margin-bottom:10px;">
      <label>Channel {{ loop.index }} Name</label><br/>
      <input name="ch{{ loop.index }}_name" value="{{ ch.name }}" />
      <label>Type</label>
      <select name="ch{{ loop.index }}_type">
        <option value="di" {% if ch.type == 'di' %}selected{% endif %}>DI</option>
        <option value="do" {% if ch.type == 'do' %}selected{% endif %}>DO</option>
        <option value="aio" {% if ch.type == 'aio' %}selected{% endif %}>AIO</option>
      </select>
      <label>I2C Address</label>
      <input name="ch{{ loop.index }}_address" value="{{ ch.address_hex }}" />
    </div>
    {% endfor %}
    <button type="submit">Save</button>
  </form>
</div>

<div class="card">
  <div class="muted">Saved in: <code>{{ i2c_cfg_path }}</code></div>
</div>

{% endblock %}
